"use strict";function waterfall(e){let t=document.getElementsByClassName("bber-item");if(!t.length)return;let n=t[0].offsetWidth,l=Math.floor(e.offsetWidth/n);totalHeight(e,t,l);let i=[];for(let e=0;e<t.length;e++)if(e<l)t[e].style.top="0px",t[e].style.left=0!=e?e*n+28*e+"px":e*n+"px",i.push(t[e].offsetHeight+16);else{let l=Math.min(...i),a=i.indexOf(l);t[e].style.top=l+"px",t[e].style.left=0!=a?1!=a?a*n+28*a+"px":n+28+"px":"0px",i[a]+=t[e].offsetHeight+16}}function averageHeight(e){let t=0,n=e.length;for(let n=0;n<e.length;n++)t+=e[n].offsetHeight+16;return Math.ceil(t/n)}function totalHeight(e,t,n){let l=document.body.clientWidth||window.innerWidth,i=Math.round(t.length/n),a=l>1450?Math.round(averageHeight(t))*i+20*i:Math.round(averageHeight(t))*i;e.style.height=a+20+"px"}function reflashEssayWaterFall(){let e=document.getElementById("waterfall");null!=e&&setTimeout((function(){waterfall(e),e.classList.add("show")}),500)}function changeTimeInEssay(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=bbDiffDate(n,!0),t.style.display="inline"}))}function bbDiffDate(e,t){var n,l,i,a=1<arguments.length&&void 0!==t&&t,o=new Date,s=new Date(e),r=o.getTime()-s.getTime();return a?(n=r/864e5,l=r/36e5,i=r/6e4,12<r/2592e6?s.toLocaleDateString():7<=n?s.toLocaleDateString().substr(5):1<=n?parseInt(n)+""+GLOBAL_CONFIG.date_suffix.day:1<=l||1<=i?"最近":GLOBAL_CONFIG.date_suffix.just):parseInt(r/864e5)}function rightMenuCommentText(e){var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){document.getElementById("comment-tips").classList.add("show"),n.initEvent("input",!0,!0);var l=replaceAll(e,"\n","\n> ");t.value='"'+l+'" >>> \n',t.dispatchEvent(n);var i=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,i-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}function replaceAll(e,t,n){return e.split(t).join(n)}function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big",document.querySelector("body").appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(l=>{if(l.target.classList&&(l.target.classList.value,1)){let i=l.target;i.addEventListener("contextmenu",(e=>e.preventDefault())),i.addEventListener("mouseover",(l=>{"LI"==l.target.tagName&&e&&(e=!1,t=setTimeout((()=>{let e=3*l.path[0].clientHeight,t=3*l.path[0].clientWidth,i=l.x-l.offsetX-(t-l.path[0].clientWidth)/2,a=l.y-l.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=i+"px",n.style.top=a+"px",n.style.display="flex",n.innerHTML=`<img src="${l.target.querySelector("img").src}">`}),300))})),i.addEventListener("mouseout",(l=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}reflashEssayWaterFall(),window.addEventListener("resize",reflashEssayWaterFall),changeTimeInEssay(),document.getElementById("post-comment")&&owoBig();