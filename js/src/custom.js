var flag;function percent(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100);n<=99||(n=99),document.querySelector("#percent").innerHTML=n}function paginationHidden(){let e=document.getElementById("pagination");null!=e&&e.getElementsByTagName("a").length<1&&(e.style.display="none")}window.addEventListener("scroll",percent),document.getElementById("page-name").innerText=document.title.split(" | king")[0],paginationHidden(),window.addEventListener("online",(function(){btf.snackbarShow("网络连接了~")})),window.addEventListener("offline",(function(){alert("网络断开了")})),document.οncοntextmenu=function(){return!1},document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1},window.onkeydown=window.onkeyup=window.onkeypress=function(){return!0},document.onkeydown=function(){if(window.event&&123==window.event.keyCode)return console.log("%c W23-12 %c 你已打开控制台.","color:white; background-color:#4f90d9"),console.log("%c S013-782 %c 你现在正处于监控中.","color:white; background-color:#d9534f"),btf.snackbarShow("开发者模式已打开，请遵循GPL协议"),!0},window.onload=function(){return isWeiXin()?alert("微信浏览器~推荐在PC端访问哦~"):isQQBrowser()?alert("QQ浏览器~推荐在PC端访问哦~"):void(isPC()||btf.snackbarShow("PC端访问效果更加哦~"))};var isPC=()=>{for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!1;break}return n},isWeiXin=()=>"micromessenger"==navigator.userAgent.match(/microMessenger/i),isQQBrowser=()=>!!navigator.userAgent.match(/mqqbrowser|qzone|qqbrowser|qbwebviewtype/i);function changeTimeInEssay(){document.querySelector("#bber")&&document.querySelectorAll("#bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=bbDiffDate(n,!0),t.style.display="inline"}))}function bbDiffDate(e,t){var n,o,i,a=1<arguments.length&&void 0!==t&&t,l=new Date,s=new Date(e),r=l.getTime()-s.getTime();return a?(n=r/864e5,o=r/36e5,i=r/6e4,12<r/2592e6?s.toLocaleDateString():7<=n?s.toLocaleDateString().substr(5):1<=n?parseInt(n)+""+GLOBAL_CONFIG.date_suffix.day:1<=o||1<=i?"最近":GLOBAL_CONFIG.date_suffix.just):parseInt(r/864e5)}function rightMenuCommentText(e){var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){document.getElementById("comment-tips").classList.add("show"),n.initEvent("input",!0,!0);var o=replaceAll(e,"\n","\n> ");t.value='"'+o+'" >>> \n',t.dispatchEvent(n);var i=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,i-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}function replaceAll(e,t,n){return e.split(t).join(n)}function owoBig(){let e=1,t="",n=document.createElement("div");n.id="owo-big",document.querySelector("body").appendChild(n),document.getElementById("post-comment").addEventListener("DOMNodeInserted",(o=>{if(o.target.classList&&(o.target.classList.value,1)){let i=o.target;i.addEventListener("contextmenu",(e=>e.preventDefault())),i.addEventListener("mouseover",(o=>{"LI"==o.target.tagName&&e&&(e=!1,t=setTimeout((()=>{let e=3*o.path[0].clientHeight,t=3*o.path[0].clientWidth,i=o.x-o.offsetX-(t-o.path[0].clientWidth)/2,a=o.y-o.offsetY;n.style.height=e+"px",n.style.width=t+"px",n.style.left=i+"px",n.style.top=a+"px",n.style.display="flex",n.innerHTML=`<img src="${o.target.querySelector("img").src}">`}),300))})),i.addEventListener("mouseout",(o=>{n.style.display="none",e=1,clearTimeout(t)}))}}))}function waterfall(e,t){let n=t[0].offsetWidth,o=Math.floor(e.offsetWidth/n),i=Math.ceil(t.length/o),a=Math.ceil(t[0].offsetHeight)*i+17*i+100;e.style.height=a+"px";let l=[];for(let e=0;e<t.length;e++)if(e<o)t[e].style.top="0px",t[e].style.left=0!=e?e*n+28*e+"px":e*n+"px",l.push(t[e].offsetHeight+16);else{let o=Math.min(...l),i=l.indexOf(o);t[e].style.top=o+"px",t[e].style.left=0!=i?1!=i?i*n+28*i+"px":n+28+"px":"0px",l[i]+=t[e].offsetHeight+16}}"/essay/"==location.pathname&&changeTimeInEssay(),document.getElementById("post-comment")&&owoBig();var king={container:document.getElementById("waterfall"),item:document.getElementsByClassName("item"),reflashEssayWaterFall:function(){king.container&&setTimeout((function(){king.item&&king.item.length&&(waterfall(king.container,king.item),king.container.classList.add("show"))}),500)},showIndexElement(e){e&&setTimeout((()=>{e.classList.add("show")}),500)},initIndexEssay:function(){new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,disableOnInteraction:!0},mousewheel:!0})}};window.onload=function(){king.initIndexEssay()},king.reflashEssayWaterFall(),king.showIndexElement(document.getElementById("content-inner")),window.addEventListener("resize",king.reflashEssayWaterFall);